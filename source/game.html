<html style="overflow: hidden;" >
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script type="module">
            import {start} from "./public/game/game.js"
            function begin() {
                $("#instruction").fadeOut(1000);
                $("#canvas").fadeIn(500);
    
                const ctx = /** @type {HTMLCanvasElement}}**/ (document.getElementById("canvas")).getContext("2d");

                requestAnimationFrame(function scalecanvas(time) {
                    ctx.canvas.width = document.body.clientWidth;
                    ctx.canvas.height = document.body.clientHeight;
                    requestAnimationFrame(scalecanvas);
                })

                function startcallback() {
                    let instructions = document.getElementById("instruction");
                    $(instructions).html("Game Over :'(<br> Click to play again")
                    $(instructions).fadeIn(1000);
                    $(document).one("click", ()=> {
                        start(ctx, startcallback)
                        $(instructions).fadeOut(1000);
                    });
                }

                start(ctx, startcallback);
            }
            $(document).one("click", begin);
        </script>
    </head>

    <body style="background-color: hsl(173, 100%, 13%);">
        <canvas id="canvas" style="position:fixed; left:0; top:0; width:100%; height:100%; display:none;"></canvas>
        <p id="instruction" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); text-align: center;">
            <mark style="color:#ff0000; background:none;">press WASD (or the arrow keys) to move</mark> <br>
            <mark style="color:#0000ff; background:none;">click the left mouse button to shoot a laser</mark> <br>
            <mark style="color:#00FF00; background:none;">WARNING LASERS (IN GAME) MAY CAUSE SEIZURES PLEASE BEWARE</mark><br>
            click to begin
        </p>
    </body>
</html>